\section{The Reputation System}\label{sec:reputation}
\subsection{What is Reputation?}\label{subsec:what-is-reputation}

Within Colony, reputation is a number tied to an account. Reputation quantifies the contribution that user has made to the colony in recent history. Reputation will be used primarily for two things within a colony --- weighing votes of users, and determining rewards that should be allocated to users. The more reputation a user has, the larger the fraction of the rewards payout they receive, and the more weight their vote has when making a decision. We believe that because reputation is awarded to users by either direct or indirect peer approval of their actions, the consequences of this will be that influence in the colony will be assigned in meritocratic way.\\

\textbf{The Colony Governance System aims to be broadly meritocratic. For this reason, the majority of day-to-day decisions in a colony are weighted by the relevant reputation.} %Thus for example. any dispute in the development team will be resolved by a vote weighted by development reputation.

Unlike tokens, reputation cannot be transferred between accounts, and it cannot be bought or sold; it represents an appraisal of the account holder's activities by their peers. Reputation must therefore be earned by direct action within the colony. This reputation that is earned will eventually be lost through inaction or perhaps bad behaviour; an outline of how reputation is gained and lost is given in section \ref{sec:earning-losing-rep}. 

% Reputations held in one colony have no bearing on reputations held by the same account in another colony.

% Since it is not a tradable asset, reputation must be \emph{earned}. The primary method of earning reputation is by completing tasks in a colony and earning the colony's tokens. As soon as you successfully complete your first task in a colony and claim a reward of the colony's tokens, you also earn \emph{reputation} in that colony. The amount of reputation earned will be based on a combination of the performance of the user completing the task, and the payout associated with the task itself. Aside from tasks, there are administrative and managerial duties that allow users to earn reputation as well. (Section \ref{sec:earning-rep}).

% Any reputation earned is earned in a \emph{context}. The Colony Network tracks the domain in which reputation was earned and the skills associated with the action that earned it. As an example, reputation earned for the completion of a task in the `development' domain, tagged with the `solidity-dev' skill tag will be recorded as colony reputation as well as development reputation and solidity-dev reputation. (See Sections \ref{sec:rep-by-domain} and \ref{sec:rep-by-skill} for details).

% Reputation can also be lost. Any account engaged in bad behaviour will lose reputation as punishment. Furthermore \textbf{all reputation decays with time}. %Reputation has a half life of 3 months\footnote{The exact decay rate may change before release.}. 
% In order to maintain a high reputation score, an account must continue to contribute to the colony. (Section \ref{sec:losing-rep}).\\



%

%
%
\subsubsection{Reputation by Domain}\label{sec:rep-by-domain}
The existence of domains that form the organisational hierarchy of a colony was described in section \ref{sec:domains}. Reputation is earned in this hierarchy, and a user has reputation in all domains that exist --- even if that reputation is zero. When a user earns or loses reputation in a domain, the reputation in parent domains changes by the same amount. In the case of a user losing reputation, they also lose reputation in all child domains; in particular, they lose the same fraction of reputation  in all children that they lost in the domain the reputation loss is notionally in. If ever a user would lose reputation and go below zero reputation, they do not go below zero.

An example makes this clearer. Suppose a colony has a `development' domain which contains a `backend' domain and a `frontend' domain. Any time a member of the colony earns reputation for work completed in the backend domain, it will increase their backend reputation, their development reputation and their reputation in the all-encompassing top-level domain of the colony. Reputation earned in the development domain will only increase the development and top-level domain reputation scores of the user.

Now we assume that later, the user has behaved badly in the `development' domain, and they have lost 100 reputation out of the 2000 they have in that domain. They lose 100 reputation in the parent domains, and 5\% of their reputation in each of the child domains of the `development' domain. 

\subsubsection{Reputation by skill}\label{sec:rep-by-skill}

We envision domains to mostly be used as an organisational hierarchy within a colony. However, this would not necessarily capture the \emph{type} of work that a user completed to earn their reputation. If the domain were a project with tasks corresponding to both design and development, reputation earned by completing tasks related to these skills would not be distinguishable.  To have a more fine-grained account of the type of work that a user completes to earn their reputation, the Colony Network also maintains a skill hierarchy for all colonies to use.

This global hierarchy of skills is available for all colonies to use. When a task is created, as well as being placed in a particular domain in the colony, it is also tagged with a skill from the skill hierarchy. When the worker earns reputation for successfully completing the task, they will earn reputation in all the relevant domains and skills. Conversely, if they are to lose reputation because their work is found inadequate, they will do so in all the relevant domains and skills.

\subsubsection{Reputation by Colony}\label{sec:rep-by-colony}
A user's reputation in a colony is the sum of their reputation in the skills and the colony's topmost domain. This is the reputation they will be voting with in any decisions that require input from everyone in the colony. Reputation in a colony has no effect outside the colony.

%insert example diagram here ... maybe a cartoon rep-tree


\subsection{Earning and losing reputation}\label{sec:earning-losing-rep}
Morally, reputation is awarded for good behaviour, for submitting good work, and for generally being a good citizen of the colony. Technically, it is earned by performing specific actions in a colony. Primarily, reputation is earned by an account whenever the account earns a bounty denominated in the colony's own token. This includes working on a task, as well as administrating or evaluating a task (see Section \ref{sec:earning-rep-from-task}). Secondly, reputation can also be earned in the dispute process (Section \ref{sec:earning-rep-in-disputes}). Finally, reputation can be `earned' when the colony is first created (Section \ref{sec:bootstrapping-rep}).

\subsubsection{Bootstrapping reputation}\label{sec:bootstrapping-rep}
Since a colony's decision making procedure rests on reputation weighted voting, we are presented with a bootstrapping problem for new colonies. When a colony is new, no-one has yet completed any work in it and so nobody will have earned any reputation. Consequently, no objections can be raised and no disputes can be resolved as no-one is able to stake reputation or vote. Then, once the first task is successfully completed, that user has a dictatorship over decisions in the same domains or skills until another user earns similar types of reputation.

To prevent this, when a colony is created, the creator can nominate addresses to have initial reputation assigned to them to allow the colony to bootstrap itself. There will be a global limit on the reputation that can be assigned in this manner in order to prevent an extreme reputation aristocracy. Given that reputation decays over time, this initial bootstrapping of reputation will not have an impact on the long-term operation of the colony. \textbf{This is the only time that reputation can be created without associated work being done.}

When a new domain is created in a colony, it has had no reputation earned in it, like a new colony, and so we must consider how to bootstrap the domain as well. If the domain has had no work done in it, we must ask who has the authority to make decisions? We do not wish to allow the creation new reputation here, as this would devalue reputation already earned in the colony by users completing work. 

Unlike the case of the new colony, we can proceed without any new reputation: we simply accept the fact the new domain has no reputation in it. The colony is still able to make decisions and resolve disputes, because any objections can be escalated to a parent domain if necessary. Furthermore, even this escalation is not necessarily required in the event of a disagreement, because, even if there is no reputation in the \emph{domain} to contribute to the decision, users will still be able to vote based on their reputation in relevant \emph{skills}.

\subsubsection{Reputation change from contributing to a task}\label{sec:earning-rep-from-task}
Each task requires three roles to be assigned: the administrator, the worker and the evaluator (as described in Section \ref{sec:tasks}). If the bounty for the task is denominated in the colony's token, each of these roles are eligible to earn reputation when the task is completed as long as their work was well received. %We should write about how admins get `rated' ... indirectly, dispute period yada yada.

The performance of the user who has completed the work is established when the work is submitted and then evaluated. At this point, both the evaluator and the worker grade each other\footnote{These scores should be submitted using a pre-commit and reveal scheme to ensure secrecy during the rating process.} out of five stars.

In the case of the evaluator, a rating of 0-2 stars counts as them rejecting the work, and a score of 3-5 stars counts as accepting the work. Beyond that, we suggest the following guidelines for ratings:
\begin{itemize}
 \item[] 0 stars: user submitted no meaningful work 
 \item[]1 star:\phantom{s} user showed little activity relevant to the task, and remains far from completion on due date.
 \item[]2 stars: user was unable to complete the task, but put in a reasonable amount of effort
 \item[]3 stars: user completed the task spec but there were issues during the work.
 \item[]4 stars: user completed the task acceptably and there were no complaints.
 \item[]5 stars: user completed the task to a higher standard than requested.
\end{itemize}

The actual number of reputation points $r$ earned by the worker for the completion of the task is then a function of this rating $s$ and the token payout $t$:
\begin{equation}\label{eq:stars-to-rep}
 r = t \times \frac{2s - 5}{3} 
\end{equation}
 
Reputation lost or gained as a function of the star rating therefore varies linearly between $\frac{-5t}{3}$ and $\frac{5t}{3}$ for zero and five stars respectively, and a rating of four stars earns the user exactly $t$. It is also possible that we should allow half-stars or even more granular ratings.

Similarly, the evaluator gets an amount of reputation based on their grading by the worker, but on a scale that only varies between $-t_{\rm ev}$ and $t_{\rm ev}$ (where $t_{\rm ev}$ is the evaluator's notional token payout for the task). They only earn this reputation in the current (and all parent) domains, not the skill reputation as they have not actually done the task. While it is likely some knowledge is required to perform the evaluation, this is not always the case; we believe that skill reputation should exclusively demonstrate ability to perform tasks.

Reputation updates occur and payouts are only made available after the objection window (described in Section \ref{sec:tasks}) has closed and all disputes have been resolved at the end of the task. The reputation updates and payouts are based on the final state of the task.

% We note that since reputation is conferred along with token payments, this creates a problem we have affectionately taken to calling the `Palo Alto Problem', whereby users who are paid more for the same work - such as those living in Palo Alto may be compared to those in South America - earn more influence in the colony. While we would like to solve this problem, we have been unable to do so to date; any possible solution either seems to introduce a great deal of complexity to the system or provide the ability for a bad actor to accrue undue influence in the colony.\\

\subsubsection{Reputation change as a result of Disputes}\label{sec:earning-rep-in-disputes}
If a dispute occurs, causing a vote among some portion of the colony, each side will have had to stake some number of tokens. Those who staked on the side determined to be right gain their stake back, plus some tokens that have been lost by the losing side. The same applies to reputation --- those on the `right' side will gain reputation that is lost by the losing side. Section \ref{sec:disputes} provides a full description of the dispute mechanism and the amount of tokens and reputation each side loses and gains.

% Whenever a user stakes tokens, they are also risking their reputation. If the tokens are lost, then they also lose reputation. Reputation is not staked, and so while at risk it can still be used by users to vote on decisions where that reputation is relevant - they only lose the voting power associated with the reputation once it is lost. However, it should be noted that the same is not true of colony tokens - once staked, their voting power is lost. However, we expect that users will only ever stake a small proportion of their tokens - only small amounts of tokens are staked in the Colony Network to ensure a tangible financial punishment to the staking user can be made if they are a badly behaving actor.

% The amount of tokens to be staked and reputation that can be lost depend on the context of the action being taken. The greater the proportion of reputation in the colony that is potentially inconvenienced by the action being taken in the event that it is fraudulent, the greater the reputation and tokens that must be staked by the user to take the action.


\subsubsection{Reputation Decay}
All reputation decays over time. Every 600000 blocks, a user's reputation in any domain or skill decays by a factor of 2. This decay occurs every hour, rather than being a step change every three months to ensure there are as few incentives to earn reputation at any particular time. This frequent, network-wide update is the primary reason for the existence of the reputation



%we need more text here FIXME

